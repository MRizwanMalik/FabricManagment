<div class="invoice-container">
    <div class="invoice-header">
        <h1 class="text-2xl font-bold">Fabric Company Invoice</h1>
        <div class="invoice-meta">
            <p>Date: {{ invoice_date }}</p>
            <p>Invoice #: {{ client.id }}-{{ "%04d" | format(client.id*100 + payments|length) }}</p>
        </div>
    </div>
    
    <div class="client-info">
        <h2 class="text-xl font-semibold">Client Information</h2>
        <p><strong>Name:</strong> {{ client.name }}</p>
        <p><strong>Company:</strong> {{ client.company_name or 'N/A' }}</p>
        <p><strong>Contact:</strong> {{ client.contact_no or 'N/A' }}</p>
    </div>
    
    <div class="invoice-items mt-6">
        <h2 class="text-xl font-semibold">Order Details</h2>
        <table class="w-full border-collapse">
            <thead>
                <tr class="bg-gray-100">
                    <th class="p-2 border">Product Type</th>
                    <th class="p-2 border">Quantity (Meter)</th>
                    <th class="p-2 border">Quantity (Gauze)</th>
                    <th class="p-2 border">Status</th>
                    <th class="p-2 border">Amount</th>
                </tr>
            </thead>
            <tbody>
                {% for fabric in fabrics %}
                <tr>
                    <td class="p-2 border">{{ fabric.cloth_type }}</td>
                    <td class="p-2 border">{{ fabric.quantity_meter or '0' }}</td>
                    <td class="p-2 border">{{ fabric.quantity_gauze or '0' }}</td>
                    <td class="p-2 border">{{ fabric.status }}</td>
                    <td class="p-2 border">
                        {% if fabric.quantity_meter %}
                            {{ fabric.quantity_meter * 1000 }}
                        {% else %}
                            0
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <div class="payment-details mt-6">
        <h2 class="text-xl font-semibold">Payment History</h2>
        <table class="w-full border-collapse">
            <thead>
                <tr class="bg-gray-100">
                    <th class="p-2 border">Date</th>
                    <th class="p-2 border">Amount</th>
                    <th class="p-2 border">Type</th>
                </tr>
            </thead>
            <tbody>
                {% for payment in payments %}
                <tr>
                    <td class="p-2 border">{{ payment.date }}</td>
                    <td class="p-2 border">{{ payment.amount }}</td>
                    <td class="p-2 border">{{ payment.type }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <div class="invoice-summary mt-6">
        <div class="flex justify-between">
            <div>
                <p><strong>Total Balance:</strong> {{ client.product_balance }}</p>
                <p><strong>Total Paid:</strong> {{ total_paid }}</p>
            </div>
            <div class="text-right">
                <p class="text-xl"><strong>Remaining Balance:</strong> {{ remaining_balance }}</p>
            </div>
        </div>
    </div>
    
    <div class="invoice-footer mt-8">
        <p>Thank you for your business!</p>
        <p class="text-sm text-gray-500">Generated on {{ invoice_date }}</p>
    </div>
</div>

<style>
    .invoice-container {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        border: 1px solid #eee;
    }
    .invoice-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 1px solid #eee;
    }
    .client-info {
        margin-bottom: 20px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        text-align: left;
        padding: 8px;
    }
    .invoice-summary {
        background-color: #f9f9f9;
        padding: 15px;
        border-radius: 5px;
    }
</style>